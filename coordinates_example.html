<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ejemplo Coordenadas</title>
  <script src="./js/jsxgraphcore.js" type="text/javascript"></script>
</head>
  <body>
  <form>
    <input type="button" value="Ver arreglo" onClick="verArreglo()">
    <input type="button" value="Borrar ultimo" onClick="borrarUltimo()">
    <input type="button" value="Borrar todo" onClick="borrar()">
    <input type="button" value="Area" onClick="area()">
  </form>

  <div id='jxgbox' class='jxgbox' style='width:400px; height:400px;'></div><script type='text/javascript'>

    var p = [];//Arreglo que almacena los puntos creados

    var getMouseCoords = function(e, i) {
            var cPos = board.getCoordsTopLeftCorner(e, i),//coordenadas desde esquina superior izquierda
                absPos = JXG.getPosition(e, i),// posición desde la cuadrícula
                dx = absPos[0]-cPos[0],//posición en: x desde la cuadrícula
                dy = absPos[1]-cPos[1];//posición en: y desde la cuadrícula
            return new JXG.Coords(JXG.COORDS_BY_SCREEN, [dx, dy], board);//regresa las coordenadas de los ejes xy
        },
        down = function(e) {
            var canCreate = true, i, coords, el;

            if (e[JXG.touchProperty]) {
                // index of the finger that is used to extract the coordinates
                i = 0;
            }
            coords = getMouseCoords(e, i);
            console.log("coords: ",coords);
            //console.log("board: ",board);
          //  console.log("JXG: ",JXG);

            for (el in board.objects) {
                if(JXG.isPoint(board.objects[el]) && board.objects[el].hasPoint(coords.scrCoords[1], coords.scrCoords[2])) {
                    canCreate = false;
//                    console.log("Points: ",board.objects[el].hasPoint(coords.scrCoords[1], coords.scrCoords[2]));
//                    console.log("canCreate: ",canCreate);
                    break;
                }
            }

            if (canCreate) {
                p.push(board.create('point', [coords.usrCoords[1], coords.usrCoords[2]]));

            }
        },
        board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-5,5,5,-5], axis: true, showcopyright: false});
        board.on('down', down);

function verArreglo() {
  for (var i = 0; i < p.length; i++) {
  //  console.log("Array points 1: ",p[i].coords.usrCoords[1],"Array points 2: ",p[i].coords.usrCoords[2]);
    console.log("p[i]: ",p[i]);
  }
  return console.log("p.length: ",p.length);
}

function borrarUltimo() {
    board.removeObject(p.pop());
    board.fullUpdate();
  return console.log("p.length: ",p.length);
}

function borrar(){
  for (var i = 0; i < p.length; i++) {
  board.removeObject(p[i]);
  }
  p.length=0;
  board.fullUpdate();
return console.log("p.length: ",p.length);
}

function area() {
//var i1 = board.create('integral', [[-1.0, 1.0], graph]);
console.log("p[0]: ",p[0].coords.usrCoords[1]);
console.log("p[0]: ",p[p.length-1].coords.usrCoords[1]);
return board.create('integral', [ [p[0].coords.usrCoords[1], p[(p.length-1)].coords.usrCoords[1] ], graph ]);

}

/*
console.log("t.Point 1: ", p[0].t.Point.coords.usrCoords[1]);
console.log("t.Point 2: ", p[0].t.Point.coords.usrCoords[2]);
*/
var f = JXG.Math.Numerics.lagrangePolynomial(p);
var graph = board.create('functiongraph', [f,-10, 10], {strokeWidth:3});


//var intgrl = board.create('integral',[[p[0].coords.usrCoords[1],p[0].coords.usrCoords[2]],graph],{fillOpacity:0.2});



    </script>
  </body>
</html>
